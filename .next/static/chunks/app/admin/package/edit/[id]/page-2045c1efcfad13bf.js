(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7722],{23775:function(e,a,t){Promise.resolve().then(t.bind(t,56665))},56665:function(e,a,t){"use strict";t.r(a);var s=t(57437),l=t(2265),r=t(99376),i=t(30166),n=t(79820),d=t(40279),c=t(12381),o=t(15291),u=t(94589),m=t(40875),x=t(51817),f=t(83229),h=t(96950),p=t(23340),g=t(68245);t(98527);let b=(0,i.default)(()=>Promise.all([t.e(3070),t.e(1652),t.e(5600)]).then(t.t.bind(t,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1}),y={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]]};a.default=()=>{let[e,a]=(0,l.useState)(!1),[t,i]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[N,w]=(0,l.useState)(""),[k,S]=(0,l.useState)(""),[_,C]=(0,l.useState)("regular"),[P,E]=(0,l.useState)("admin"),[R,Z]=(0,l.useState)(null),[z,I]=(0,l.useState)("flat"),[F,V]=(0,l.useState)(0),[O,Q]=(0,l.useState)(null),[U,q]=(0,l.useState)(!1),[A,B]=(0,l.useState)(!0),[D,$]=(0,l.useState)([]),[G,T]=(0,l.useState)([]),[X,Y]=(0,l.useState)(!1),[J,L]=(0,l.useState)([]),[M,W]=(0,l.useState)([]),[H,K]=(0,l.useState)(null),[ee,ea]=(0,l.useState)(!1),{toast:et}=(0,p.pm)();(0,r.useRouter)();let es=(0,r.usePathname)(),el=null==es?void 0:es.split("/").pop();(0,l.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([(0,h.eJ)(),(0,h.eq)()]);$(e||[]),W(a||[])}catch(e){et({variant:"error",title:"Error",description:"Failed to load data."})}})()},[]),(0,l.useEffect)(()=>{(async()=>{if(el)try{var e,a;let t=await (0,h.Q5)(el.toString());S(t.name),w(t.description||""),C(t.package_type),E(t.created_by),Z(t.provider_id||null),I(t.discount_type),V(Number(t.discount_value)),Q(t.validity_period||null),q(!!t.renewal_options),B(!!t.is_active),K(t.no_of_service||null);let s=null===(e=t.rateCards)||void 0===e?void 0:e.map(e=>e.rate_card_id.toString());T(null!=s?s:[]);let l=null===(a=t.addons)||void 0===a?void 0:a.map(e=>e.category_id.toString());L(null!=l?l:[]),t.image&&i("/uploads/".concat(t.image))}catch(e){console.log("Failed to load package details.",e),et({variant:"error",title:"Error",description:"Failed to load package details."})}})()},[el]);let er=async e=>{if(e.preventDefault(),a(!0),!k||!z||!F){et({variant:"error",title:"Validation Error",description:"Please fill all the required fields."}),a(!1);return}let t={id:el?el.toString():"",name:k,description:N||"",image:j||null,package_type:_,created_by:P,provider_id:R,discount_type:z,discount_value:F,validity_period:"amc"===_?O:null,renewal_options:U,is_active:A,rate_card_ids:G,addon_category_ids:J,no_of_service:H};try{await (0,h.$y)(el?el.toString():"",t),et({variant:"success",title:"Success",description:"Package updated successfully."})}catch(e){et({variant:"error",title:"Error",description:e.message||"Failed to update package."})}finally{a(!1)}},ei=(e,a)=>{a?T(a=>[...a,e]):T(a=>a.filter(a=>a!==e))},en=(e,a)=>{a?L(a=>[...a,e]):L(a=>a.filter(a=>a!==e))};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-12xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"text-left space-y-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Package Management"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Edit package details"})]}),(0,s.jsxs)(n.Zb,{className:"border-none shadow-xl bg-white/80 backdrop-blur",children:[(0,s.jsx)(n.Ol,{className:"border-b border-gray-100 pb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-8 w-1 bg-blue-600 rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.ll,{className:"text-xl text-gray-800",children:"Edit Package"}),(0,s.jsx)(n.SZ,{className:"text-gray-500",children:"Update the package details below"})]})]})}),(0,s.jsx)(n.aY,{className:"pt-6",children:(0,s.jsxs)("form",{onSubmit:er,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Package Name"}),(0,s.jsx)(d.I,{placeholder:"Enter package name",value:k,onChange:e=>S(e.target.value),className:"h-11",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)(b,{value:N,onChange:w,theme:"snow",modules:y,style:{height:"200px"}})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Package Image"}),(0,s.jsx)(d.I,{type:"file",accept:"image/*",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&(v(t),i(URL.createObjectURL(t)))},className:"h-11"}),t&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("img",{src:t,alt:"Package Preview",className:"h-32 w-32 object-cover rounded-md"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Package Type"}),(0,s.jsxs)(o.Ph,{value:_,onValueChange:C,children:[(0,s.jsx)(o.i4,{className:"bg-white border-gray-200",children:(0,s.jsx)(o.ki,{placeholder:"Select package type"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"regular",children:"Regular"}),(0,s.jsx)(o.Ql,{value:"amc",children:"AMC"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Select Rate Cards"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",className:"flex items-center justify-between w-full p-2 bg-white border border-gray-200 rounded",onClick:()=>Y(!X),children:[G.length>0?"Selected (".concat(G.length,")"):"Select rate cards",(0,s.jsx)(m.Z,{className:"w-4 h-4"})]}),X&&(0,s.jsx)("div",{className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded shadow-lg max-h-60 overflow-auto",children:D.map(e=>(0,s.jsxs)("div",{className:"flex items-center p-2",children:[(0,s.jsx)(g.X,{checked:G.includes(e.id.toString()),onCheckedChange:a=>ei(e.id.toString(),a),id:"rateCard-".concat(e.id)}),(0,s.jsx)("label",{htmlFor:"rateCard-".concat(e.id),className:"ml-2",children:e.name})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Select Addon Categories"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",className:"flex items-center justify-between w-full p-2 bg-white border border-gray-200 rounded",onClick:()=>ea(!ee),children:[J.length>0?"Selected (".concat(J.length,")"):"Select addon categories",(0,s.jsx)(m.Z,{className:"w-4 h-4"})]}),ee&&(0,s.jsx)("div",{className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded shadow-lg max-h-60 overflow-auto",children:M.map(e=>(0,s.jsxs)("div",{className:"flex items-center p-2",children:[(0,s.jsx)(g.X,{checked:J.includes(e.id.toString()),onCheckedChange:a=>en(e.id.toString(),a),id:"category-".concat(e.id)}),(0,s.jsx)("label",{htmlFor:"category-".concat(e.id),className:"ml-2",children:e.name})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Discount Type"}),(0,s.jsxs)(o.Ph,{value:z,onValueChange:I,children:[(0,s.jsx)(o.i4,{className:"bg-white border-gray-200",children:(0,s.jsx)(o.ki,{placeholder:"Select discount type"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"flat",children:"Flat"}),(0,s.jsx)(o.Ql,{value:"percentage",children:"Percentage"})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Discount Value"}),(0,s.jsx)(d.I,{type:"number",value:F.toString(),onChange:e=>V(parseFloat(e.target.value)),placeholder:"Enter discount value",required:!0})]})]}),"amc"===_&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Validity Period (months)"}),(0,s.jsx)(d.I,{type:"number",value:(null==O?void 0:O.toString())||"",onChange:e=>Q(parseInt(e.target.value)),placeholder:"Enter validity period"})]}),"amc"===_&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"No of Service"}),(0,s.jsx)(d.I,{type:"number",value:(null==H?void 0:H.toString())||"",onChange:e=>K(parseInt(e.target.value)),placeholder:"Enter No of service"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.r,{checked:U,onCheckedChange:q}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Enable Renewal Options"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.r,{checked:A,onCheckedChange:B}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]}),(0,s.jsx)(c.z,{className:"w-full",disabled:e,type:"submit",children:e?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Saving..."})]}):(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Update Package"})]})})]})}),(0,s.jsx)(n.eW,{className:"border-t border-gray-100 mt-6"})]})]})})}},68245:function(e,a,t){"use strict";t.d(a,{X:function(){return d}});var s=t(57437),l=t(2265),r=t(9270),i=t(30401),n=t(93448);let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.fC,{ref:a,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...l,children:(0,s.jsx)(r.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})})});d.displayName=r.fC.displayName},40279:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(57437),l=t(2265),r=t(93448);let i=l.forwardRef((e,a)=>{let{className:t,type:l,...i}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});i.displayName="Input"},15291:function(e,a,t){"use strict";t.d(a,{Bw:function(){return h},Ph:function(){return o},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var s=t(57437),l=t(2265),r=t(93402),i=t(40875),n=t(22135),d=t(30401),c=t(93448);let o=r.fC;r.ZA;let u=r.B4,m=l.forwardRef((e,a)=>{let{className:t,children:l,...n}=e;return(0,s.jsxs)(r.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[l,(0,s.jsx)(r.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let h=l.forwardRef((e,a)=>{let{className:t,children:l,position:i="popper",...n}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsxs)(r.VY,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(f,{})]})})});h.displayName=r.VY.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=r.__.displayName;let p=l.forwardRef((e,a)=>{let{className:t,children:l,...i}=e;return(0,s.jsxs)(r.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.wU,{children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(r.eT,{children:l})]})});p.displayName=r.ck.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=r.Z0.displayName},94589:function(e,a,t){"use strict";t.d(a,{r:function(){return n}});var s=t(57437),l=t(2265),r=t(50721),i=t(93448);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...l,ref:a,children:(0,s.jsx)(r.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=r.fC.displayName}},function(e){e.O(0,[6458,8218,73,2496,7514,3175,7218,3657,6714,2971,2117,1744],function(){return e(e.s=23775)}),_N_E=e.O()}]);